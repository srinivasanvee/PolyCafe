<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="pc-mock-data">
  <template>
    <iron-ajax url="../../data/{{table}}-meta-data.json" last-response="{{metaData}}" auto></iron-ajax>
    <iron-ajax url="../../data/{{table}}-data.json" last-response="{{gridItems}}" auto></iron-ajax>
    <pc-ajax url="../../data/drop-down-config.json" response="{{dropDownConfig}}" auto></pc-ajax>

    <firebase-document location="https://polycafe.firebaseio.com/users/google%3A103961256376868823284/city" data="{{cities}}"></firebase-document>
  </template>

  <script>
    (function() {
    'use strict';

    Polymer({
      is: 'pc-mock-data',

      properties: {
        dropDownConfig: { notify: true },
        metaData:  { notify: true },
        gridItems: {notify: true },
        table: { },
        cities: { observer: '_cityUpdated'}
      },
      _cityUpdated: function(val) {
        var vals = [];
        _.forEach(val, function(v) { 
          vals.push(v);
        });
        console.log('finalized array !');
        var res = JSON.stringify(vals);
        localStorage.setItem('dropdown.city', res);   
      }
      
    });
  })();
  </script>

</dom-module>