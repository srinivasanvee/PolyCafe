<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="pc-grid">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    
   <iron-signals on-iron-signal-updategrid="updateGridExternal"></iron-signals>
   
   <table class="table table-striped table-bordered table-hover table-condensed">
      <tbody>
        <tr>
          <th></th>
          <template is="dom-repeat" items="{{metaData.Fields}}">
              <th>{{item.Text}}</th>
          </template>
        </tr>
        <template id="idTemplate" is="dom-repeat" items="{{gridItems}}" as="gitem">
          <tr>
            <td><input type="radio" name="rdoItems" id="{{gitem.Id}}" on-click="onSelect"></td>
            <template is="dom-repeat" items="{{metaData.Fields}}">
              <td>{{getItemValue(gitem, item) }}</th>
            </template>  
          </tr>
        </template>
      </tbody>
   </table>

  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'pc-grid',

      properties: {
        foo: {
          type: String,
          value: 'pc-grid',
          notify: true
        },
        gridItems: { 
          type: Array,
          notify: true
        },
        selectedItem: {
          notify: true
        },
        dropDownConfig: {},
        dropDownData: { value: {} }
      },
      getItemValue: function(obj, meta) {
        if(meta.ElementType === 'Dropdown')
        {
          return obj[meta.DropdownName];
        }
        else
        {
          return obj[meta.Name];
        }
      },
      updateGridExternal: function() {
         //todo: refresh the grid on updates   
      },
      onSelect: function(val){ 
          this.selectedItem = val.model.gitem; 
      } 
    });
  })();
  </script>
</dom-module>
